<!doctype html>
<html lang="en">
  <head>
    <!-- Required meta tags -->
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

    <!-- Bootstrap CSS -->
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css" integrity="sha384-ggOyR0iXCbMQv3Xipma34MD+dH/1fQ784/j6cY/iJTQUOhcWr7x9JvoRxT2MZw1T" crossorigin="anonymous">
    <link rel="stylesheet" href="../styles.css">

    <title>Proyecto Equipo 1</title>
  </head>
  <body>
    <!--- Nav Bar --->
    <nav class="navbar navbar-dark bg-primary navbar-expand-lg col-12">
      <a class="navbar-brand" href="../index.html">
        <img src="../IMG/logo-tec-W.png" height="40" alt="">
      </a>
      <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarSupportedContent" aria-controls="navbarSupportedContent" aria-expanded="false" aria-label="Toggle navigation">
        <span class="navbar-toggler-icon"></span>
      </button>

      <div class="collapse navbar-collapse" id="navbarSupportedContent">
        <ul class="navbar-nav mr-auto">
         
          <li class="nav-item" id="nav-payback">
            <a class="nav-link" href="Payback.html">Payback Period</a>
          </li>
          
          <li class="nav-item" id="nav-npv">
            <a class="nav-link" href="NPV.html">NPV<span class="sr-only">(current)</span></a>
          </li>
          
          <li class="nav-item" id="nav-checklist">
            <a class="nav-link" href="Checklist.html">Checklist</a>
          </li>
          
          <li class="nav-item active" id="nav-depreciation">
            <a class="nav-link" href="Depreciation.html">Depreciation</a>
          </li>
          
          <li class="nav-item" id="nav-proyect">
            <a class="nav-link" href="ProyectScreening.html">Proyect Screening Methods</a>
          </li>
        </ul>
        <h4 style="color: white;">Proyecto Final / Equipo #1</h4>
      </div>
    </nav>
    
    <!--- Hovered Section --->
    
    <!--- Proyect Info --->
    <div class="banner banner-info container-fluid">
        <h2>Evaluación y Administración de Proyectos</h2>
        <h4>Proyect Portfolio Evaluation Tool</h4>
        <h4>Mtro. Octavio Gutiérrez</h4>
        <h4>Equipo 1</h4>
    </div>
    
    <!--- Payback Period Info --->
    <div class="banner banner-payback container-fluid">
        <h2>Payback Period</h2>
        <h5>El Payback Period o Periodo de retorno
            es un criterio para evaluar inversiones
            que se define como el periodo de tiempo
            requerido para recuperar el capital inicial
            de una inversión.</h5>
    </div>
    
    <!--- NPV Info --->
    <div class="banner banner-npv container-fluid">
        <h2>Net Present Value</h2>
        <h5>El Valor Presente Neto (NPV) es la diferencia entre el valor presente del cashflow y el valor presente de los cashflows de un proyecto a través del tiempo.
        Se utiliza para planificar inversiones analizando la viabilidad del un proyecto basandose en los flujos de efectivo esperados de este mismo.</h5>
    </div>
    
    <!--- Checklist Info --->
    <div class="banner banner-checklist container-fluid">
        <h2>Checklist</h2>
        <h5>Descripción del Checklist</h5>
    </div>
    
    <!--- Depreciation Info --->
    <div class="banner banner-depreciation container-fluid">
        <h2>Depreciation</h2>
        <h5>La Depreciación es un descuento concedido para el consumo de capital. Actúa como un escudo contra los impuestos.</h5>
    </div>
    
    <!--- Proyect Screening Methods --->
    <div class="banner banner-proyect container-fluid">
        <h2>Proyect Screening Methods</h2>
        <h5>Descripción de Proyect Screening Methods</h5>
    </div>
    
    <!--- BLOCK --->
    <div class="block container-fluid">
      <h1 class="block-title">DEPRECIATION</h1>
      <form>
        <div class="row" style="margin: auto; margin-top: 20px;">
           <div class="col-1"></div>
            <div type="submit" class="btn btn-primary col-2" id="sline">STRAIGHT LINE</div>
            <div class="col-2"></div>
            <div type="submit" class="btn btn-primary col-2" id="macrs">MACRS</div>
            <div class="col-2"></div>
            <div class="btn btn-primary col-2"><a href="Depreciation.html" id="reset">Borrar información</a></div>
            <div class="col-1"></div>
        </div>
       <div class="row">
           <div class="form-group col-6" style="display: none;" id="periods-input-display">
              <label>Period Number</label>
              <input type="number" class="form-control" id="periods-input" placeholder="1-10" required min=1 max=10 >
              <small class="form-text text-muted">Introduce un número de periodos a evaluar entre 1 - 10</small>
            </div>
       </div>
       <div class="row">
          <div class="form-group col-6" style="display: none;" id="tax-display">
             <label>Tax (%) </label>
             <input type="number" class="form-control" id="tax" placeholder="%" required min=1 max=99 step="0.01" >
             <small class="form-text text-muted">Introduce un tax rate entre 1% - 99% (Acepta hasta dos decimales) </small>
           </div>
           <div class="form-group col-6" style="display: none;" id="svalue-display">
             <label>Salvage value</label>
             <input type="number" class="form-control" id="svalue" placeholder="2000" required min=1 max="principal">
             <small class="form-text text-muted">Introduce el valor del salvage value </small>
           </div>
      </div>
       <div class="row">
          <div class="form-group col-6" style="display: none;" id="principal-display">
             <label>Principal</label>
             <input type="number" class="form-control" id="principal" placeholder="10000" >
             <small class="form-text text-muted">Introduce la inversión inicial </small>
           </div>
           <div class="form-group col-6" style="display: none;" id="svalue-year-display">
             <label>Period of salvage value</label>
             <input type="number" class="form-control" id="svalue-year" placeholder="5" required min=1 max="periods-input">
             <small class="form-text text-muted">Introduce el periodo en que se aplica el salvage value </small>
           </div>
      </div>
      <div class="row">
          <div class="form-group col-6" style="display: none;" id="dep-category-display">
             <label>Depreciation category</label>
             <input type="number" class="form-control" id="dep-category" placeholder="3,5,7,10" >
             <small class="form-text text-muted">Introduce la categoría de MARCS correspondiente al números de periodos</small>
           </div>
         
          
       
      </div>
           <div type="submit" class="btn btn-primary" id="generar" style="display: none;">Generar Tabla</div>
           <div type="submit" class="btn btn-primary" id="generarmcrs" style="display: none;">Generar Tabla</div>
           
      </form>
      
      
      <div class="container" id="output">
          
      </div>
      
      <div class="row">
          <div class="col-4"></div>
          <div type="submit" class="btn btn-primary col-4" id="calcular" style="display: none;">Calcular Depreciación </div>
          <div class="col-4"></div>
      </div>
      <div class="row">
        <div class="col-4"></div>
        <div type="submit" class="btn btn-primary col-4" id="calcularmcrs" style="display: none;">Calcular Depreciación </div>
        <div class="col-4"></div>

       

   

    </div>
      
      
  </div>
       
    </div>
    
    <!-- Optional JavaScript -->
    <!-- jQuery first, then Popper.js, then Bootstrap JS -->
    <script src="https://code.jquery.com/jquery-3.3.1.slim.min.js" integrity="sha384-q8i/X+965DzO0rT7abK41JStQIAqVgRVzpbzo5smXKp4YfRvH+8abtTE1Pi6jizo" crossorigin="anonymous"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.7/umd/popper.min.js" integrity="sha384-UO2eT0CpHqdSJQ6hJty5KVphtPhzWj9WO1clHTMGa3JDZwrnQq4sF86dIHNDz0W1" crossorigin="anonymous"></script>
    <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/js/bootstrap.min.js" integrity="sha384-JjSmVgyd0p3pXB1rRibZUAYoIIy6OrQ6VrjIEaFf/nJGzIxFDsf4x0xIM+B07jRM" crossorigin="anonymous"></script>
    <script>
       $(document).ready(function() {
            $("#sline").click(function() {
               
                $("#periods-input-display").css("display", "block");
                $("#principal-display").css("display", "block");
                $("#svalue-display").css("display", "block");
                $("#generar").css("display", "block");
                $("#generarmcrs").css("display", "none");
               

                $("#tax-display").css("display", "block");
                $("#start-year-display").css("display", "none");
                $("#svalue-year-display").css("display", "none");
                $("#dep-category-display").css("display", "none");
                $("#output").css("display", "none");
                $("#calcular").css("display", "none");
                $("#calcularmcrs").css("display", "none");
     
               
            });
        });
        $(document).ready(function() {
            $("#macrs").click(function() {
               
                $("#periods-input-display").css("display", "block");
                $("#principal-display").css("display", "block");
                $("#svalue-display").css("display", "block");
                $("#tax-display").css("display", "block");
                $("#start-year-display").css("display", "block");
                $("#svalue-year-display").css("display", "block");
                $("#dep-category-display").css("display", "block");
                $("#generar").css("display", "none");
                $("#generarmcrs").css("display", "block");
                $("#output").css("display", "none");
                $("#calcular").css("display", "none");
                $("#calcularmcrs").css("display", "none");
               
            });
        });
        function addRow(number) {
            $("#output").append(
              '<div class="row">' +
                            '<div class="col-2">' +
                                '<h3>' + number + '<h3>' +
                            '</div>' +
                            '<div class="col-2">' +
                                '<h3 id="depan' + number + '"> - </h3>' +
                            '</div>' +
                            '<div class="col-2">' +
                                '<h3 id="dep' + number + '"> - </h3>' +
                            '</div>' +
                            '<div class="col-2">' +
                                '<h3 id="vledger' + number + '"> - </h3>' +
                            '</div>' +
                            '<div class="col-2">' +
                                '<h3 id="atax' + number + '"> - </h3>' +
                            '</div>'+ 
                '</div>');
        };

        function addRowM(number) {
            $("#output").append(
              '<div class="row">' +
                            '<div class="col-2" >' +
                                '<h3>' + number + '<h3>' +
                            '</div>' +
                            '<div class="col-2">' +
                                '<h3 id="macrs' + number + '"> - </h3>' +
                            '</div>' +
                            '<div class="col-2">' +
                                '<h3 id="depan' + number + '"> - </h3>' +
                            '</div>' +
                            '<div class="col-2">' +
                                '<h3 id="dep' + number + '"> - </h3>' +
                            '</div>' +
                            '<div class="col-2">' +
                                '<h3 id="vledgers' + number + '"> - </h3>' +
                            '</div>'+ 
                            '<div class="col-2">' +
                                '<h3 id="tax' + number + '"> - </h3>' +
                            '</div>'+
                '</div>');
        };

        $(document).ready(function() {
            $("#generar").click(function() {
              $("#output").css("display", "block");
              
                $("#output").html("<h1></h1>");
                
                var periodos = $('#periods-input').val();
                var principal = $('#principal').val();
                var salvagev = $('#svalue').val();
                var tax = $('#tax').val();
                
                if ((periodos >= 1) && (periodos <= 10)&&(principal>0)&&(salvagev>0)/*&&(principal>salvagev)*/) {
                    
                    
                    $("#output").append("<h4> Número de periodos: " + periodos + "</h4>" + "<h4>Principal: " + principal + "</h4>"+"<h4>Salvage value: " + salvagev + "</h4>"+"<h4>Tax: " + tax + "%</h4>");
                    
                    $("#output").append(
                        '<div class="row" >' +
                            '<div class="col-2">' +
                                '<h3>Period<h3>' +
                            '</div>' +
                            '<div class="col-2">' +
                                '<h3>Depreciation Ann<h3>' +
                            '</div>' +
                            '<div class="col-2">' +
                                '<h3>Depreciation Acc<h3>' +
                            '</div>' +
                            '<div class="col-2">' +
                                '<h3>Value in ledger<h3>' +
                            '</div>'+
                            '<div class="col-2">' +
                                '<h3>Taxes<h3>' +
                            '</div>'+
                        '</div>');
                      
                    for(var i = 0; i <= periodos; i++) {
                        addRow(i);
                    }
                    
                    $("#calcular").css("display", "block");
                   
                }
                else{
                  window.alert("Debe ingresar correctamente todos los campos");
                }
            });
        });

        $(document).ready(function() {
            $("#generarmcrs").click(function() {
              $("#output").css("display", "block");
              
                $("#output").html("<h1></h1>");
                
                var periodos = $('#periods-input').val();
                var principal = $('#principal').val();
                var salvagev = $('#svalue').val();
                var tax = $('#tax').val();
                var depCategory = $('#dep-category').val();
                var yearSalvage = $('#svalue-year').val();

                if((salvagev>0)&&(yearSalvage<1)){
                  window.alert("Debe ingresar el año en que se aplica en salvage value");


                }
                if((depCategory!=3)&&(depCategory!=5)&&(depCategory!=7)&&(depCategory!=10)){
                  window.alert("Debe ingresar una categoría de MACRS valida (3,5,,7,10)");


                }
                

                  if ((periodos >= 1) && (periodos <= 10)&&(yearSalvage<=periodos)&&(depCategory>0)) {
                    
                    
                    $("#output").append("<h4> Número de periodos: " + periodos + "</h4>" + 
                    "<h4>Principal: " + principal + "</h4>"+"<h4>Salvage value: " + salvagev + 
                    "</h4>"+"<h4>Tax: " + tax + "%</h4>"+"<h4>Categoría MACRS: " + depCategory + "</h4>"
                    +"<h4>Periodo del Salvage Value: " + yearSalvage + "</h4>");
                    
                    $("#output").append(
                        '<div class="row">' +
                            '<div class="col-2">' +
                                '<h3>Period<h3>' +
                            '</div>' +
                            '<div class="col-2">' +
                                '<h3>MACRS<h3>' +
                            '</div>' +
                            '<div class="col-2">' +
                                '<h3>Depreciation Ann<h3>' +
                            '</div>' +
                            '<div class="col-2">' +
                                '<h3>Depreciation Acc<h3>' +
                            '</div>' +
                            '<div class="col-2">' +
                                '<h3>Value in ledger<h3>' +
                            '</div>'+
                            '<div class="col-2">' +
                                '<h3>Taxes<h3>' +
                            '</div>'+
                        '</div>');
                      
                    for(var i = 0; i <= periodos; i++) {
                        addRowM(i);
                    }
                    
                    $("#calcularmcrs").css("display", "block");
                }
                else{
                  window.alert("Debe ingresar correctamente todos los campos");
                }


                

                
                
            });
        });

        function DEP(number, p, svalue,periodos,taxes) {
            
            var depreciationan=0;
            var depreciationac=0;
            var afterTaxes;
            var valedger=0;
            
            if(number == 0) {
                depreciationac=0;
                depreciationan=0
                valedger=p;
                afterTaxes=(valedger*(taxes/100));
                $('#dep' + number).html(depreciationac);
                $('#depan' + number).html(depreciationan);
                $('#vledger' + number).html(valedger);
                $('#atax' + number).html(afterTaxes);
                
            } else {
                depreciationan =((p-svalue)/periodos);
                depreciationac = ((p-svalue)/periodos)*number; 
                
                //depreciationac = depreciationac+depreciationan;
                $('#depan' + number).html((depreciationan).toFixed(2));
                $('#dep' + number).html((depreciationac).toFixed(2));
                valedger = (p-depreciationac);
                afterTaxes = (valedger*(taxes/100));
                $('#vledger' + number).html((valedger).toFixed(2));
                $('#atax' + number).html((afterTaxes).toFixed(2));
                
            }
            
        }


        function MACRS(number, p, svalue,periodos,taxes,depc,syear) {
            
            var macrs3= ['-','33.33','44.45', '14.81', '7.41'];
            var macrs5= ['-','20','32', '19.2', '11.52', '11.52','5.76'];
            var macrs7= ['-','14.29','24.49', '17.49', '12.49', '8.93','8.92', '8.93', '4.46'];
            var macrs10= ['-','10','18', '14.4', '11.52', '9.22','7.37', '6.55', '6.55', '6.56','6.55', '3.28'];
            var afterTaxes;
            var valedger=0;
            var valedgerS=0;
            
            if(number == 0) {
                depreciationac=0;
                depreciationan=0;
                depacu=0;
                valedger=p;
                afterTaxes=(valedger*(taxes/100));
                $('#dep' + number).html(depreciationac);
                $('#depan' + number).html(depreciationan);
                $('#vledgers' + number).html(valedger);
                $('#tax' + number).html(afterTaxes);
                
            } else {
              if((depc==3)) depreciationac= (p*((macrs3[number]/100))); 
              if((depc==5))depreciationac= (p*((macrs5[number]/100)));
              if((depc==7))depreciationac= (p*((macrs7[number]/100)));
              if((depc==10))depreciationac= (p*((macrs10[number]/100)));


              depacu+=depreciationac;

               // depreciationac = ((p-svalue)/periodos)*number; 
                
                //depreciationac = depreciationac+depreciationan;
                $('#dep' + number).html((depacu).toFixed(2));
                $('#depan' + number).html((depreciationac).toFixed(2));
               if(number==syear) {
                valedgerS =(p-depacu)+ parseFloat(svalue);
                afterTaxes = (valedgerS*(taxes/100));
                console.log (valedgerS)
                $('#vledgers' + number).html((valedgerS).toFixed(2));
                $('#tax' + number).html((afterTaxes).toFixed(2));
               }
               else 
               {
                valedger = (p-depacu);
                afterTaxes = (valedger*(taxes/100));
                $('#vledgers' + number).html((valedger).toFixed(2));
                $('#tax' + number).html((afterTaxes).toFixed(2));

               }
                
                

            if((depc==3)) $('#macrs' + number).html((macrs3[number]));
            if((depc==5)) $('#macrs' + number).html((macrs5[number]));
            if((depc==7)) $('#macrs' + number).html((macrs7[number]));
            if((depc==10)) $('#macrs' + number).html((macrs10[number]));
                
            }

            

            
            
        }
        $(document).ready(function() {
            $("#calcular").click(function() {
                var periodos = $('#periods-input').val();
                var principal = $('#principal').val();
                var salvage = $('#svalue').val();
                var tax = $('#tax').val();
                suma = 0;
                
                for(var i = 0; i <= periodos; i++) {
                    DEP(i, principal, salvage,periodos,tax);
                }
                
            });
          });


            $(document).ready(function() {
            $("#calcularmcrs").click(function() {
                var periodos = $('#periods-input').val();
                var principal = $('#principal').val();
                var salvage = $('#svalue').val();
                var tax = $('#tax').val();
                var depCategory = $('#dep-category').val();
                var yearSalvage = $('#svalue-year').val();
                suma = 0;
                
                for(var i = 0; i <= periodos; i++) {
                   MACRS(i, principal, salvage,periodos,tax,depCategory,yearSalvage);
                }
                
            });
        });
    </script>
    
    <script>
    $(document).ready(function(){
      $(".navbar-brand").hover(function(){
        $(".banner-info").css("display", "block");
        }, function(){
        $(".banner-info").css("display", "none");
      });
    });
        
    $(document).ready(function(){
      $("#nav-payback").hover(function(){
        $(".banner-payback").css("display", "block");
        }, function(){
        $(".banner-payback").css("display", "none");
      });
    });    
        
        
    $(document).ready(function(){
      $("#nav-npv").hover(function(){
        $(".banner-npv").css("display", "block");
        }, function(){
        $(".banner-npv").css("display", "none");
      });
    });
        
    $(document).ready(function(){
      $("#nav-checklist").hover(function(){
        $(".banner-checklist").css("display", "block");
        }, function(){
        $(".banner-checklist").css("display", "none");
      });
    });
        
    $(document).ready(function(){
      $("#nav-depreciation").hover(function(){
        $(".banner-depreciation").css("display", "block");
        }, function(){
        $(".banner-depreciation").css("display", "none");
      });
    });    
        
    $(document).ready(function(){
      $("#nav-proyect").hover(function(){
        $(".banner-proyect").css("display", "block");
        }, function(){
        $(".banner-proyect").css("display", "none");
      });
    });
        
    </script>
    
  </body>
</html>
